{% extends "base.html" %}

{% block title %}Kardex de Movimientos{% endblock %}

{% block content %}
    <h1>Auditor√≠a de Movimientos (Kardex)</h1>
    <p>
        <strong>Periodo:</strong> Del {{ fecha_inicio }} al {{ fecha_fin }} <br>
        <strong>Total Movimientos:</strong> {{ movimientos|length }}
    </p>

    <table>
        <thead>
            <tr>
                <th width="15%">Fecha</th>
                <th width="10%">Tipo</th>
                <th width="25%">Producto</th>
                <th width="10%">Cant.</th>
                <th width="20%">Responsable</th>
                <th width="20%">Detalle/Destino</th>
            </tr>
        </thead>
        <tbody>
            {% for mov in movimientos %}
            <tr>
                <td>{{ mov.fecha }}</td>
                <td>
                    {% if mov.tipo == 'Entrada' %}
                        <span class="badge badge-success">ENTRADA</span>
                    {% else %}
                        <span class="badge badge-danger">SALIDA</span>
                    {% endif %}
                </td>
                <td>{{ mov.producto }}</td>
                <td style="text-align: right; font-weight: bold;">
                    {% if mov.tipo == 'Salida' %}-{% endif %}{{ mov.cantidad }}
                </td>
                <td>{{ mov.usuario }}</td>
                <td style="font-size: 8pt; color: #555;">{{ mov.detalle }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}